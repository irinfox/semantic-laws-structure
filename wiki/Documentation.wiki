#описание скриптов и текстовых файлов.

=Парсинг (препроцессинг) данных=
*data/parsewikisource.pl*
Выбирает из дампа Викитеки кодексы, для каждого их них создаёт отдельную папку в data/res/, пишет их постатейно в каждый файл в папку кодекса. Иерархия до статьи (включительно) сохраняется в файл codes_structure.txt в формате: 
#code;redaction;some_parts{0,4};chapter;subparts{0,2);article \tab\tab filepath
(кодекс;редакция;разделы «старше» главы (от 1 до 4);глава;разделы меньше главы (1-2); статья двойной_таб относительный_путь_к_файлу (кодекс/имяфайла))
На вход: дамп Викитеки.

=Грамматики и вспомогательные файлы=
*references.cxx*
Грамматика для ссылок. Дополнительно использует файлы: law_names.txt и parts_of_law.txt с названиями законов и их частей.

*np.cxx*
Грамматика для именных групп, импортирует грамматику со ссылками. Дополнительно использует badnpstart.txt для отсеивания слов, с которых нежелательно, чтоб начиналась группа.

*definitions.cxx*
Грамматика для извлечения определений, импортирует грамматику для ИГ. Дополнительно использует badnpstart.txt

*legal.cxx*
Грамматика для извлечения (структурирования) нормативных фактов, импортирует грамматику определений. Дополнительно использует: badpred.txt (для выбора тех предикатов, что не используются в определениях), badnpstart.txt и time_words.txt (список слов, относящихся к времени).

=Конфигурационные файлы и запуск=
*kwtypes.proto*
*maindic.gzt*
*facttypes.proto*
*config_legal.proto*

*run_toma.sh*
Запускает Томиту с config_legal.proto на папках с кодексами, на выход отдаёт папку с размеченными файлами "имя_кодекса.txt".
На вход: директория с текстовыми файлами (data/res), директория для результатов (txtres).

=Тесты=
Для проверки, не сломали ли что-нибудь последние изменения в грамматиках.
*config_test.proto*
*run_test.sh*
*make_goldtest.sh*

=Оценка=
Директория с файлами - /trunk/evaldir
Далее по подпапкам:
data/ - папки по кодексам с отобранными статьями.
deftoma/ - папка с результатами работы грамматики определений на кодексах из data, каждой папке кодекса из data соответствует файл "имя_кодекса.txt"
legalres/ - папка с результатами работы грамматики для извлечения содержательных компонент норм
golddef/ - папка с определениями из кодексов, доразмечены вручную
goldlegal/ - папка с содержательными компонентами, доразмечены вручную

Скрипты:
*choose_for_eval.sh*
Случайным образом отбирает по 5 статей из целевых кодексов и по 1 из остальных.
На вход: 
  первым параметром папка с кодексами (data/res), 
  вторым - папка, куда кладутся отобранные статьи (evaldir/data).

*count_eval.sh"
Подсчитывает количество полей фактов определённого типа отдельно по целевым и остальным кодексам.
На вход: 
  первым параметром - папка с размеченными кодексами,
  вторым - поле факта (Subject, SubjectKey...)

Порядок запуска:
1. choose_for_eval.sh (data/res) (evaldir/data)
2. run_toma.sh (evaldir/data) (evaldir/toma)
3. cp (evaldir/toma) (evaldir/goldtoma) | _разметка руками_
4. count_eval.sh (evaldir/toma) (Subject..)
5. count_eval.sh (evaldir/goldtoma) (Subject..)